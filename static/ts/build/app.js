(()=>{var u=(t,e,o)=>new Promise((s,i)=>{var b=C=>{try{_(o.next(C))}catch(L){i(L)}},P=C=>{try{_(o.throw(C))}catch(L){i(L)}},_=C=>C.done?s(C.value):Promise.resolve(C.value).then(b,P);_((o=o.apply(t,e)).next())});var N=class{getBudgetContainer(){return document.querySelector(".month-box")}getBudgetCount(){return this.getBudgetContainer().dataset.value}getDate(){return document.querySelector(".month-box__date").innerText}updateDate(e){document.querySelector(".month-box__date").textContent=e}set setBudget(e){document.querySelector(".income-box__heading--sub").textContent=""+e}updateBudget(e,o){let s=+document.querySelector(".income-box__heading--sub").textContent;o==="income"?s+=+e:s-=+e,document.querySelector(".income-box__heading--sub").textContent=s.toString()}},m=new N;var G=class{getFormElement(e){return document.querySelector(`.category__${e}`)}getFormAttributeValue(e){return this.getFormElement(e).dataset.value}setFormAttributeValue(e,o){this.getFormElement(e).dataset.value=""+o}getCategoryTitle(e){if(!!document.querySelector(`.category__title--${e}`))return document.querySelector(`.category__title--${e}`).textContent}setCategoryTitle(e,o){document.querySelector(`.category__title--${e}`).textContent=o}getCategoryDate(e){if(!!document.querySelector(`.category__date--${e}`))return document.querySelector(`.category__date--${e}`).textContent}setCategoryDate(e,o){document.querySelector(`.category__date--${e}`).textContent=o}getAddCategoryButton(e){return document.querySelector(`.add-${e}-category`)}getNextCategoryButton(e){return document.querySelector(`.btn-next-${e}-category`)}getPreviousCategoryButton(e){return document.querySelector(`.btn-prev-${e}-category`)}getExpenseCategoryContainer(){return document.querySelector(".box-right__expense-categories")}},r=new G;var I=class{constructor(e,o){this.popupMenuEl=e;this.categoryEl=o;this.viewState={menuType:null,prevCount:0,buttonType:"",inputDate:"",inputTitle:"",inputAmount:"",categoryDate:"",categoryTitle:"",currentBudgetPage:1,currentIncomePage:1,currentExpensePage:1,currentIncomeCategoryPage:1,currentExpenseCategoryPage:1}}updateStateOnAddNewElement(){let e,o;this.viewState.buttonType==="add-income-category"||this.viewState.buttonType==="add-expense-category"?(e="category",o="income"):(e="item",o=this.viewState.buttonType==="add-income"?"income":"expense"),this.viewState.inputDate=this.popupMenuEl.getInputDate(e),this.viewState.inputTitle=this.popupMenuEl.getInputTitle(e),this.viewState.categoryDate=this.categoryEl.getCategoryDate(o),(this.viewState.buttonType==="add-income"||this.viewState.buttonType==="add-expense")&&(this.viewState.inputAmount=this.popupMenuEl.getInputAmount(),this.viewState.categoryTitle=this.categoryEl.getCategoryTitle(o))}get state(){return this.viewState}set buttonType(e){this.viewState.buttonType=e}set menuType(e){this.viewState.menuType=e}},j=class{getOverlay(){return document.querySelector(".overlay")}getContainer(){return document.querySelector(".container")}getMessageElement(){return document.querySelector(".message")}},y=new j;function J(t){let e=null;if(document.cookie&&document.cookie!==""){let o=document.cookie.split(";");for(let s=0;s<o.length;s++){let i=o[s].trim();if(i.substring(0,t.length+1)===t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}}return e}function F(t,e){let o=p("month",t),s=p("year",t),i=p("month",e),b=p("year",e);return!(o!==i||s!==b)}function $(t,e){return u(this,null,function*(){try{return(yield fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":J("csrftoken")},body:JSON.stringify(t)})).text().then(function(i){return i})}catch(o){throw new Error(o)}})}function Y(t){return u(this,null,function*(){try{return(yield fetch(t)).text().then(function(s){return s})}catch(e){throw new Error(e)}})}function p(t,e){return t==="month"?("0"+(new Date(e).getMonth()+1)).slice(-2):t==="year"?""+new Date(e).getFullYear():t==="day"?("0"+new Date(e).getDate()).slice(-2):e}function c(t){let e=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],o=new Date(t).getMonth()+1,s=("0"+new Date(t).getDate()).slice(-2),i=""+new Date(t).getFullYear();return`${e[o-1]} ${s}, ${i}`}function w(t){return`${["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(t).getMonth()]} ${p("year",t)}`}var D="/budget-menu/",X="/api/budget/",z="/api/income-category/",K="/api/expense-category/",Q="/api/income/",W="/api/expense/",Z=5e3;function ee(t,e,o){return u(this,null,function*(){return yield $({category:o,date:e,month:p("month",e),year:p("year",e)},`${D}${t}/`)})}function te(t,e,o,s,i){return u(this,null,function*(){return yield $({title:o,amount:s,date:e,month:p("month",e),year:p("year",e),categoryTitle:i},`${D}${t}/`)})}function ne(t){return u(this,null,function*(){let e=yield Y(`${t}`);return JSON.parse(e)})}var oe=class{getFormElement(e){return document.querySelector(`.items-box__${e}`)}getFormAttributeValue(e){return this.getFormElement(e).dataset.value}setFormAttributeValue(e,o){this.getFormElement(e).dataset.value=""+o}getBoxLeft(e){return document.querySelector(`.box-left__${e}`)}getAddButton(e){return document.querySelector(`.add-${e}`)}getPreviousButton(e){return document.querySelector(`.btn-prev-${e}`)}getNextButton(e){return document.querySelector(`.btn-next-${e}`)}setIncomeAndExpenseTitle(e,o){document.querySelector(`.${e}-box__${e}-type`).textContent=o}setIncomeAndExpenseAmount(e,o){document.querySelector(`.${e}-box__${e}-amount`).textContent=""+o+" Rs"}setIncomeAndExpenseDate(e,o){document.querySelector(`.${e}-box__${e}-date`).textContent=o}},a=new oe;var re=class{updatePaginationButtonOnUI(e,o,s,i,b,P){return u(this,null,function*(){return o===1&&s>1?(i.children[0]instanceof HTMLButtonElement&&i.removeChild(i.children[0]),i.children[1]instanceof HTMLButtonElement||i.insertAdjacentHTML("beforeend",b)):o>1&&o<s?(i.children[0]instanceof HTMLButtonElement||i.insertAdjacentHTML("afterbegin",P),i.children[2]instanceof HTMLButtonElement||i.insertAdjacentHTML("beforeend",b)):o===s&&(i.children[0]instanceof HTMLButtonElement||i.insertAdjacentHTML("afterbegin",P),i.children[1]instanceof HTMLButtonElement&&i.removeChild(i.children[1]),i.children[2]instanceof HTMLButtonElement&&i.removeChild(i.children[2])),yield ne(e)})}},x=class extends re{updateIncomeCategory(){r.setCategoryTitle("income",this.data.incomeCategoryTitle),r.setCategoryDate("income",c(this.data.incomeCategoryDate)),n.state.prevCount=+r.getFormAttributeValue("incomes"),r.setFormAttributeValue("incomes",this.data.incomeCategoryCount)}validateAndUpdateIncomeAndExpense(e){e.nextCount>=1?(e.prevCount>=1?this.updateIncomeAndExpense(e.type):(e.type==="income"&&!(e.addButtonParent.children[0]instanceof HTMLButtonElement)&&e.addButtonParent.insertAdjacentHTML("afterbegin",e.addButtonMarkup),e.incomeAndExpenseParent.insertAdjacentHTML("afterbegin",e.incomeAndExpenseMarkup)),n.state.prevCount=+a.getFormAttributeValue(`${e.type}s`),a.setFormAttributeValue(`${e.type}s`,e.type==="income"?this.data.incomeCount:this.data.expenseCount)):e.prevCount>=1&&(e.incomeAndExpenseParent.removeChild(e.type==="income"?document.querySelector(".income-box__income"):document.querySelector(".expense-box__expense")),e.type==="income"&&e.removeButton&&e.addButtonParent.removeChild(document.querySelector(".add-expense-category")),a.setFormAttributeValue(`${e.type}s`,0))}updateIncomeAndExpense(e){a.setIncomeAndExpenseTitle(e,e==="income"?this.data.incomeTitle:this.data.expenseTitle),a.setIncomeAndExpenseAmount(e,e==="income"?this.data.incomeAmount:this.data.expenseAmount),a.setIncomeAndExpenseDate(e,c(e==="income"?this.data.incomeDate:this.data.expenseDate))}validateAndUpdateExpenseCategory(e){if(e.nextCount>=1)e.prevCount>=1?this.updateExpenseCategory():(e.expenseCategoryparent.insertAdjacentHTML("beforeend",e.expenseCategoryMarkup),document.querySelector(".box-left__expenses").insertAdjacentHTML("afterbegin",e.addExpenseButtonMarkup),n.state.prevCount=+r.getFormAttributeValue("expenses"),r.setFormAttributeValue("expenses",this.data.expenseCategoryCount));else if(e.prevCount>=1){let o=document.querySelector(".category__item--expense");o.parentElement.removeChild(o);let s=document.querySelector(".btn-primary--red");s.parentElement.removeChild(s),r.setFormAttributeValue("expenses",0)}}updateExpenseCategory(){r.setCategoryTitle("expense",this.data.expenseCategoryTitle),r.setCategoryDate("expense",c(this.data.expenseCategoryDate)),n.state.prevCount=+r.getFormAttributeValue("expenses"),r.setFormAttributeValue("expenses",this.data.expenseCategoryCount)}updateButtons(e,o,s,i){s.children[0]instanceof HTMLButtonElement&&s.removeChild(s.children[0]),!(e>1&&o>1&&s.lastElementChild instanceof HTMLButtonElement)&&(e>=1&&o>1||!e&&o>1?s.insertAdjacentHTML("beforeend",i):(e>1&&o===1||e>1&&!o)&&s.lastElementChild instanceof HTMLButtonElement&&s.removeChild(s.lastElementChild))}};var g=class{renderComponent(e){this.componentExists()||this.props.parent.insertAdjacentHTML(e,this.getComponentMarkup())}updateComponentState(e,o){e.dataset.value=""+o}};var l=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count!==1}getComponentMarkup(){return`
     <button type="submit" class="btn-secondary ${this.props.buttonType==="add-income-category"?`btn-${this.props.pageType}-income-category`:`btn-${this.props.pageType}-expense-category`}">
        <svg class="btn-secondary__icon btn-secondary__icon--orange">
            <use xlink:href="../static/img/symbol-defs.svg#icon-arrow-with-circle-${this.props.pageType==="next"?"right":"left"}"
          ></use>
        </svg>
    </button>
    `}},d=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count!==1}getComponentMarkup(){return`
      <button type="submit" class="btn-secondary btn-${this.props.pageType}-${this.props.buttonType==="add-income"?"income":"expense"}">
        <svg class="btn-secondary__icon btn-secondary__icon--${this.props.buttonType==="add-income"?"green":"pink"}">
          <use xlink:href="../static/img/symbol-defs.svg#icon-arrow-with-circle-${this.props.pageType==="next"?"right":"left"}">
          </use>
        </svg>
      </button>`}},f=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count!==1}getComponentMarkup(){return`
      <button type="submit" class="btn-secondary btn-${this.props.pageType}-month">
        <svg class="btn-secondary__icon btn-secondary__icon--grey">
          <use xlink:href="../static/img/symbol-defs.svg#icon-arrow-with-circle-${this.props.pageType==="next"?"right":"left"}">
          </use>
        </svg>
      </button>`}};var T=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count!==0}getComponentMarkup(){return`
    <li class="category__item category__item--${this.props.type==="income"?"grey":"white"} category__item--${this.props.type}">
      <p class="category__title category__title--${this.props.type}">${this.props.title}</p>
        <p class="category__date category__date--${this.props.type}">${this.props.date}</p>
      <div class="action-box">
        <button class="btn-secondary">
          <svg class="btn-secondary__icon btn-secondary__icon--orange">
            <use xlink:href="../static/img/symbol-defs.svg#icon-cancel-circle"></use>
          </svg>
        </button>
        <button class="btn-secondary">
         <svg class="btn-secondary__icon btn-secondary__icon--orange">
          <use
            xlink:href="../static/img/symbol-defs.svg#icon-pen"
            ></use>
          </svg>
        </button>
      </div>
    </li>`}};var M=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count!==0}getComponentMarkup(){return`<button class="btn-primary btn-primary--${this.props.buttonType==="income"?"blue":"red"} add-${this.props.buttonType}">add ${this.props.buttonType}</button>`}};var E=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count!==0}getComponentMarkup(){return`
    <li class="items-box__item ${this.props.type}-box__${this.props.type}">
      <p class="${this.props.type}-box__${this.props.type}-type">${this.props.title}</p>
      <p class="${this.props.type}-box__${this.props.type}-amount">${this.props.amount} Rs</p>
      <p class="${this.props.type}-box__${this.props.type}-date">${this.props.date}</p>
          <div class="action-box">
          <button type="submit" class="btn-secondary">
            <svg class="btn-secondary__icon btn-secondary__icon--white">
              <use
                xlink:href="../static/img/symbol-defs.svg#icon-cancel-circle"
              ></use>
            </svg>
          </button>
        <button class="btn-secondary">
          <svg class="btn-secondary__icon btn-secondary__icon--white">
            <use
              xlink:href="../static/img/symbol-defs.svg#icon-pen">
            </use>
          </svg>
        </button>
      </div>
    </li>`}};var h=class extends g{constructor(e){super();this.props=e}componentExists(){return this.props.count>1}getComponentMarkup(){return`
    <button class="btn-primary btn-primary--orange add-expense-category">add expense category</button>`}};var ae=class extends x{paginateBudget(){return u(this,null,function*(){this.data=yield this.updatePaginationButtonOnUI(`${X}${n.state.currentBudgetPage}/`,n.state.currentBudgetPage,+m.getBudgetCount(),m.getBudgetContainer(),new f({pageType:"next"}).getComponentMarkup(),new f({pageType:"prev"}).getComponentMarkup()),m.updateDate(w(this.data.budgetDate)),m.setBudget=this.data.budget,this.updateIncomeCategory(),this.updateButtons(n.state.prevCount,this.data.incomeCategoryCount,r.getFormElement("incomes"),new l({pageType:"next",buttonType:"add-income-category"}).getComponentMarkup()),this.validateAndUpdateIncomeAndExpense({type:"income",incomeAndExpenseParent:a.getFormElement("incomes"),addButtonParent:r.getFormElement("expenses").parentElement,incomeAndExpenseMarkup:new E({type:"income",title:this.data.incomeTitle,amount:""+this.data.incomeAmount,date:c(this.data.incomeDate)}).getComponentMarkup(),addButtonMarkup:new h({}).getComponentMarkup(),prevCount:+a.getFormAttributeValue("incomes"),nextCount:this.data.incomeCount,removeButton:!0}),this.updateButtons(n.state.prevCount,this.data.incomeCount,a.getFormElement("incomes"),new d({pageType:"next",buttonType:"add-income"}).getComponentMarkup()),this.validateAndUpdateExpenseCategory({expenseCategoryparent:r.getFormElement("expenses"),expenseCategoryMarkup:new T({type:"expense",title:this.data.expenseCategoryTitle,date:c(this.data.expenseCategoryDate)}).getComponentMarkup(),addExpenseButtonMarkup:new M({buttonType:"expense"}).getComponentMarkup(),prevCount:+r.getFormAttributeValue("expenses"),nextCount:this.data.expenseCategoryCount}),this.updateButtons(n.state.prevCount,this.data.expenseCategoryCount,r.getFormElement("expenses"),new l({pageType:"next",buttonType:"add-expense-category"}).getComponentMarkup()),this.validateAndUpdateIncomeAndExpense({type:"expense",incomeAndExpenseParent:a.getFormElement("expenses"),addButtonParent:r.getFormElement("expenses").parentElement,incomeAndExpenseMarkup:new E({type:"expense",title:this.data.expenseTitle,amount:""+this.data.expenseAmount,date:c(this.data.expenseDate)}).getComponentMarkup(),addButtonMarkup:new h({}).getComponentMarkup(),prevCount:+a.getFormAttributeValue("expenses"),nextCount:this.data.expenseCount,removeButton:!0}),this.updateButtons(n.state.prevCount,this.data.expenseCount,a.getFormElement("expenses"),new d({pageType:"next",buttonType:"add-expense"}).getComponentMarkup())})}},S=new ae;var se=class extends x{paginateIncome(){return u(this,null,function*(){let e=`${Q}${n.state.currentIncomePage}/?month=${+p("month",r.getCategoryDate("income"))}&year=${+p("year",r.getCategoryDate("income"))}&title=${r.getCategoryTitle("income")}`;this.data=yield this.updatePaginationButtonOnUI(e,n.state.currentIncomePage,+a.getFormAttributeValue("incomes"),a.getFormElement("incomes"),new d({pageType:"next",buttonType:"add-income"}).getComponentMarkup(),new d({pageType:"prev",buttonType:"add-income"}).getComponentMarkup()),this.updateIncomeAndExpense("income")})}},ie=class extends x{paginateExpense(){return u(this,null,function*(){let e=`${W}${n.state.currentExpensePage}/?month=${+p("month",r.getCategoryDate("expense"))}&year=${+p("year",r.getCategoryDate("expense"))}&title=${r.getCategoryTitle("expense")}`;this.data=yield this.updatePaginationButtonOnUI(e,n.state.currentExpensePage,+a.getFormAttributeValue("expenses"),a.getFormElement("expenses"),new d({pageType:"next",buttonType:"add-expense"}).getComponentMarkup(),new d({pageType:"prev",buttonType:"add-expense"}).getComponentMarkup()),this.updateIncomeAndExpense("expense")})}},H=new se,k=new ie;var pe=class{getPopupMenu(e){return document.querySelector(`.menu__${e}`)}getInputTitle(e){return document.querySelector(`.input__${e}`).value}getInputAmount(){return document.querySelector(".input__amount").value}getInputDate(e){return document.querySelector(`.input__date${e==="category"?"--category":""}`).value}},ue=class{clearInputFields(e){document.querySelector(`.${e.classList[1]}`).childNodes.forEach(o=>{o.value=""})}getPopupMenuClickedButton(e){let o=e.target.classList;return e.target.classList[o.length-1]}togglePopupMenu(e,o,s,i){e.style.visibility=s,e.style.opacity=i,o.style.visibility=s,o.style.opacity=i}},v=new ue,B=new pe;function A(t,e){t.textContent=e,t.style.visibility="visible",t.style.opacity="1",window.setTimeout(function(){t.style.visibility="hidden",t.style.opacity="0"},Z)}var V=class{renderController(e){e!=="success"?A(y.getMessageElement(),e):(n.state.buttonType==="add-income"||n.state.buttonType==="add-income-category"?this.componentId="income":this.componentId="expense",A(y.getMessageElement(),"Successfully added \u{1F600}"),this.renderComponent())}},me=class extends V{init(){return u(this,null,function*(){if(n.state.buttonType==="add-expense-category"&&!F(n.state.inputDate,n.state.categoryDate)){A(y.getMessageElement(),`Date field must contain month ${p("month",n.state.categoryDate)} and year ${p("year",n.state.categoryDate)}.`);return}this.renderController(yield ee(n.state.buttonType,n.state.inputDate,n.state.inputTitle))})}renderComponent(){if(this.component=new T({count:+r.getFormAttributeValue(`${this.componentId}s`),parent:r.getFormElement(`${this.componentId}s`),title:n.state.inputTitle,date:c(n.state.inputDate),type:this.componentId}),this.component.renderComponent("beforeend"),n.state.categoryDate&&(p("month",n.state.inputDate)!==p("month",n.state.categoryDate)||p("year",n.state.inputDate)!==p("year",n.state.categoryDate))){new f({count:+m.getBudgetCount(),parent:m.getBudgetContainer(),pageType:"next"}).renderComponent("beforeend"),m.getBudgetContainer().dataset.value=(+m.getBudgetCount()+1).toString();return}new l({count:+r.getFormAttributeValue(`${this.componentId}s`),parent:r.getFormElement(`${this.componentId}s`),buttonType:n.state.buttonType,pageType:"next"}).renderComponent("beforeend"),new M({count:+r.getFormAttributeValue(`${this.componentId}s`),parent:a.getBoxLeft(`${this.componentId}s`),buttonType:this.componentId}).renderComponent("afterbegin"),this.component.updateComponentState(r.getFormElement(`${this.componentId}s`),+r.getFormAttributeValue(`${this.componentId}s`)+1),!(+m.getBudgetContainer().dataset.value>=1)&&(m.getBudgetContainer().dataset.value="1",m.getDate()===""&&m.updateDate(w(n.state.inputDate)))}},ce=class extends V{init(){return u(this,null,function*(){if(!F(n.state.inputDate,n.state.categoryDate)){A(y.getMessageElement(),`Date field must contain month ${p("month",n.state.categoryDate)} and year ${p("year",n.state.categoryDate)}.`);return}this.renderController(yield te(n.state.buttonType,n.state.inputDate,n.state.inputTitle,n.state.inputAmount,n.state.categoryTitle))})}renderComponent(){this.component=new E({count:+a.getFormAttributeValue(`${this.componentId}s`),parent:a.getFormElement(`${this.componentId}s`),title:n.state.inputTitle,amount:n.state.inputAmount,date:c(n.state.inputDate),type:this.componentId}),this.component.renderComponent("beforeend"),new d({count:+a.getFormAttributeValue(`${this.componentId}s`),parent:a.getFormElement(`${this.componentId}s`),buttonType:n.state.buttonType,pageType:"next"}).renderComponent("beforeend"),this.component.updateComponentState(a.getFormElement(`${this.componentId}s`),+a.getFormAttributeValue(`${this.componentId}s`)+1),this.componentId==="income"&&!(r.getExpenseCategoryContainer().children[0]instanceof HTMLButtonElement)&&new h({count:+a.getFormAttributeValue(`${this.componentId}s`),parent:r.getExpenseCategoryContainer()}).renderComponent("afterbegin"),m.updateBudget(n.state.inputAmount,`${this.componentId}`)}},q=new me,U=new ce;var de=class extends x{paginateIncomeCategory(){return u(this,null,function*(){let e=`${z}${n.state.currentIncomeCategoryPage}/?month=${+p("month",r.getCategoryDate("income"))}&year=${+p("year",r.getCategoryDate("income"))}`;this.data=yield this.updatePaginationButtonOnUI(e,n.state.currentIncomeCategoryPage,+r.getFormAttributeValue("incomes"),r.getFormElement("incomes"),new l({pageType:"next",buttonType:"add-income-category"}).getComponentMarkup(),new l({pageType:"prev",buttonType:"add-income-category"}).getComponentMarkup()),this.updateIncomeCategory(),this.validateAndUpdateIncomeAndExpense({type:"income",incomeAndExpenseParent:a.getFormElement("incomes"),addButtonParent:r.getFormElement("expenses").parentElement,incomeAndExpenseMarkup:new E({type:"income",title:this.data.incomeTitle,amount:""+this.data.incomeAmount,date:c(this.data.incomeDate)}).getComponentMarkup(),addButtonMarkup:new h({}).getComponentMarkup(),prevCount:+a.getFormAttributeValue("incomes"),nextCount:this.data.incomeCount,removeButton:!1}),this.updateButtons(n.state.prevCount,this.data.incomeCount,a.getFormElement("incomes"),new d({pageType:"next",buttonType:"add-income"}).getComponentMarkup())})}},ge=class extends x{paginateExpenseCategory(){return u(this,null,function*(){let e=`${K}${n.state.currentExpenseCategoryPage}/?month=${+p("month",r.getCategoryDate("expense"))}&year=${+p("year",r.getCategoryDate("expense"))}`;this.data=yield this.updatePaginationButtonOnUI(e,n.state.currentExpenseCategoryPage,+r.getFormAttributeValue("expenses"),r.getFormElement("expenses"),new l({pageType:"next",buttonType:"add-expense-category"}).getComponentMarkup(),new l({pageType:"prev",buttonType:"add-expense-category"}).getComponentMarkup()),this.updateExpenseCategory(),this.validateAndUpdateIncomeAndExpense({type:"expense",incomeAndExpenseParent:a.getFormElement("expenses"),addButtonParent:r.getFormElement("expenses").parentElement,incomeAndExpenseMarkup:new E({type:"expense",title:this.data.expenseTitle,amount:""+this.data.expenseAmount,date:c(this.data.expenseDate)}).getComponentMarkup(),addButtonMarkup:new h({}).getComponentMarkup(),prevCount:+a.getFormAttributeValue("expenses"),nextCount:this.data.expenseCount,removeButton:!1}),this.updateButtons(n.state.prevCount,this.data.expenseCount,a.getFormElement("expenses"),new d({pageType:"next",buttonType:"add-expense"}).getComponentMarkup())})}},O=new de,R=new ge;function le(t){t.overlay.addEventListener("click",()=>{t.togglePopupMenu(t.viewState.state.menuType,t.overlay,"hidden","0")})}function ye(t){t.container.addEventListener("click",e=>{e.target.closest(".add-income-category")||e.target.closest(".add-expense-category")?(t.viewState.buttonType=t.getPopupMenuClickedButton(e),t.viewState.menuType=t.getPopupMenu("category"),t.togglePopupMenu(t.viewState.state.menuType,t.overlay,"visible","1")):(e.target.closest(".add-income")||e.target.closest(".add-expense"))&&(t.viewState.menuType=t.getPopupMenu("item"),t.viewState.buttonType=t.getPopupMenuClickedButton(e),t.togglePopupMenu(t.viewState.state.menuType,t.overlay,"visible","1"))})}function xe(t,e,o){[t.getPopupMenu("category"),t.getPopupMenu("item")].forEach(s=>{s.addEventListener("submit",i=>{i.preventDefault(),t.viewState.updateStateOnAddNewElement(),t.clearInputFields(t.viewState.state.menuType),t.togglePopupMenu(t.viewState.state.menuType,t.overlay,"hidden","0"),t.viewState.state.buttonType==="add-income-category"||t.viewState.state.buttonType==="add-expense-category"?e():o()})})}function Ee(t,e){t.addEventListener("click",o=>{o.preventDefault(),o.target.closest(".btn-next-month")&&n.state.currentBudgetPage<+m.getBudgetCount()?(n.state.currentBudgetPage+=1,n.state.currentIncomeCategoryPage=1,n.state.currentIncomePage=1,n.state.currentExpenseCategoryPage=1,n.state.currentExpensePage=1,e()):o.target.closest(".btn-prev-month")&&n.state.currentBudgetPage!==1&&(n.state.currentBudgetPage-=1,n.state.currentIncomeCategoryPage=1,n.state.currentIncomePage=1,n.state.currentExpenseCategoryPage=1,n.state.currentExpensePage=1,e())})}function he(t,e){t.addEventListener("click",o=>{o.preventDefault(),o.target.closest(".btn-next-income-category")&&n.state.currentIncomeCategoryPage<+r.getFormAttributeValue("incomes")?(n.state.currentIncomeCategoryPage+=1,n.state.currentIncomePage=1,e()):o.target.closest(".btn-prev-income-category")&&n.state.currentIncomeCategoryPage!==1&&(n.state.currentIncomeCategoryPage-=1,n.state.currentIncomePage=1,e())})}function Ce(t,e){t.addEventListener("click",o=>{o.preventDefault(),o.target.closest(".btn-next-expense-category")&&n.state.currentExpenseCategoryPage<+r.getFormAttributeValue("expenses")?(n.state.currentExpenseCategoryPage+=1,n.state.currentExpensePage=1,e()):o.target.closest(".btn-prev-expense-category")&&n.state.currentExpenseCategoryPage!==1&&(n.state.currentExpenseCategoryPage-=1,n.state.currentExpensePage=1,e())})}function be(t,e){t.addEventListener("click",o=>{o.preventDefault(),o.target.closest(".btn-next-income")&&n.state.currentIncomePage<+a.getFormAttributeValue("incomes")?(n.state.currentIncomePage+=1,e()):o.target.closest(".btn-prev-income")&&n.state.currentIncomePage!==1&&(n.state.currentIncomePage-=1,e())})}function fe(t,e){t.addEventListener("click",o=>{o.preventDefault(),o.target.closest(".btn-next-expense")&&n.state.currentExpensePage<+a.getFormAttributeValue("expenses")?(n.state.currentExpensePage+=1,e()):o.target.closest(".btn-prev-expense")&&n.state.currentExpensePage!==1&&(n.state.currentExpensePage-=1,e())})}var n=new I(B,r);le({overlay:y.getOverlay(),viewState:n,togglePopupMenu:v.togglePopupMenu});ye({overlay:y.getOverlay(),container:y.getContainer(),viewState:n,getPopupMenu:B.getPopupMenu,getPopupMenuClickedButton:v.getPopupMenuClickedButton,togglePopupMenu:v.togglePopupMenu});xe({overlay:y.getOverlay(),viewState:n,getPopupMenu:B.getPopupMenu,clearInputFields:v.clearInputFields,togglePopupMenu:v.togglePopupMenu},q.init.bind(q),U.init.bind(U));Ee(m.getBudgetContainer(),S.paginateBudget.bind(S));he(r.getFormElement("incomes"),O.paginateIncomeCategory.bind(O));be(a.getFormElement("incomes"),H.paginateIncome.bind(H));Ce(r.getFormElement("expenses"),R.paginateExpenseCategory.bind(R));fe(a.getFormElement("expenses"),k.paginateExpense.bind(k));})();
