(()=>{var u=(t,e,r)=>new Promise((i,n)=>{var f=o=>{try{c(r.next(o))}catch(a){n(a)}},g=o=>{try{c(r.throw(o))}catch(a){n(a)}},c=o=>o.done?i(o.value):Promise.resolve(o.value).then(f,g);c((r=r.apply(t,e)).next())});var l=class{constructor(e){this.inputFields=document.querySelectorAll("input");this.form=document.querySelector(".form");this.errorNode=document.querySelector(".message");this.submitButton=document.querySelector(".btn-primary");this.linkButton=document.querySelector(".btn-secondary");this.resetInputFields(),this.form.addEventListener("submit",function(r){r.preventDefault(),e()})}url(){return this.submitButton.dataset.url}username(){return this.inputFields[1].value}password(){return this.inputFields[2].value}confirmPassword(){if(!!this.inputFields[3])return this.inputFields[3].value}toggleButtonClick(e){this.submitButton.disabled=e,this.linkButton.disabled=e}resetInputFields(){Array.from(this.inputFields).forEach(function(e){e.classList.add("form__input")}),this.inputFields[1].placeholder="username",this.inputFields[1].classList.add("form__input--username"),this.inputFields[2].placeholder="password",this.inputFields[2].classList.add("form__input--password1"),!!this.inputFields[3]&&(this.inputFields[3].placeholder="confirm password",this.inputFields[3].classList.add("form__input--password2"))}};function p(t){let e=null;if(document.cookie&&document.cookie!==""){let r=document.cookie.split(";");for(let i=0;i<r.length;i++){let n=r[i].trim();if(n.substring(0,t.length+1)===t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}}return e}function d(t,e){return u(this,null,function*(){try{return(yield fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p("csrftoken")},body:JSON.stringify(t)})).text().then(function(n){return n})}catch(r){throw new Error(r)}})}var m=5e3;function h(t,e){t.textContent=e,t.style.visibility="visible",t.style.opacity="1",window.setTimeout(function(){t.style.visibility="hidden",t.style.opacity="0"},m)}function y(){return u(this,null,function*(){s.toggleButtonClick(!0);let t=yield d({username:s.username(),password1:s.password(),password2:s.confirmPassword()},s.url());t==="success"?location.replace("/budget-menu/"):(s.toggleButtonClick(!1),h(s.errorNode,t))})}var s=new l(y);})();
